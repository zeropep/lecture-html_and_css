<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Javascript Level 1 Test</title>
</head>
<body>
<h1>인원 정보 출력하기</h1>
<ol>
    <li>인원수(양의 정수) 입력받기</li>
    <li>인원수 만큼 이름과 나이 입력 받기</li>
    <li>입력받은 정보를 출력하기(console.log() X)</li>
</ol>
<hr>
인원수 입력 > <input type="number" name="" id="students">
<button type="button" id="printInputs">인원수 설정하기</button>

<div id="printInputsArea">

</div>
<div id="printResultArea">
    
</div>
<script>
    document.getElementById("printInputs").addEventListener("click", () => {
        document.getElementById("printInputsArea").innerHTML = "";
        document.getElementById("printResultArea").innerHTML = "";

        let students = parseInt(document.getElementById("students").value);

        if (students < 1) {
            alert("양의 정수를 입력하세요")
        } else {
            printInputs(students);
        }
    });
    document.addEventListener("click", (e) => {
        if (e.target.id == "printResult") {
            const inputNames = document.querySelectorAll("#printInputsArea input[type=text]");
            const inputAges = document.querySelectorAll("#printInputsArea input[type=number]");
            // console.log(inputs); 
            // nodeList로 들어옴
            let students = parseInt(document.getElementById("students").value);
            str = "<ul>"
                for (let i = 0; i < students; i++) {
                    str += `<li>학생${i+1} 이름 >`
                        str += `${inputNames[i].value}<br>`
                        str += `나이 > ${inputAges[i].value}</li>`;
                    }
                    str += "</ul>";
                    document.getElementById("printResultArea").innerHTML = str;
        };
    });

    /* 
    원래라면 이벤트리스너가 있는 시점이 버튼 발생시점보다 앞선다.
    그렇기 때문에 버튼 활성화가 되지 않는 것이며,
    어떤 클릭이벤트가 발생했을 때 해당 이벤트타겟이 printResult일 때
    기능을 실행하도록 만들어야 한다.
    하지만 이런식으로 코드를 짠다면 모든 이벤트를 받아오기 때문에
    필수적으로 개별적인 if문에 넣어야 하며, 사용시 주의해야 한다.
    갯수가 많아진다면 switch case문으로 만들어서 실행기능은 
    다른 func으로 던져버려야 한다.

    혹은 동적으로 만들어진 버튼에 대한건 onclick으로 사용해도 무방하다.
    */

    function printInputs(stds) {
        let str = "<ul>";
        for (let i = 0; i <stds; i++) {
            str += `<li>학생${i+1} 이름 >`
            str += `<input type="text"><br> 나이 > <input type="number"></li>`;
        };
        str += "</ul>";
        str += `<button type="button" id="printResult">입력결과 출력</button>`;
        document.getElementById("printInputsArea").innerHTML = str;
    }
</script>
</body>
</html>